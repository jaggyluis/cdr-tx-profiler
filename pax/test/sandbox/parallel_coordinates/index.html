<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="d3.parcoords.js"></script>
	<link rel="stylesheet" type="text/css" href="d3.parcoords.css">
	<div id="profiles" class="parcoords" style="width:1000px;height:300px"></div>
	<div id="passengers" class="parcoords" style="width:1000px;height:300px"></div>

	<script>

	  var colorgen = d3.scale.ordinal()
	    .range(["#a6cee3","#1f78b4","#b2df8a","#33a02c",
	            "#fb9a99","#e31a1c","#fdbf6f","#ff7f00",
	            "#cab2d6","#6a3d9a","#ffff99","#b15928"]);

		// load csv file and create the chart
		d3.csv('profiles.csv', function(data) {

			var color = function(d) { return colorgen(d.name); };

			var parcoords = d3.parcoords()("#profiles")
			    .data(data)
			    .hideAxis(["weighted"])
			    .color(color)
			    .alpha(1)
			    .composite("darken")
			    .margin({ top: 24, left: 150, bottom: 12, right: 0 })
			    .mode("queue")
			    .render()
			    //.reorderable();
			    .brushMode("1D-axes");  // enable brushing


		  	parcoords.svg.selectAll("text")
		    	.style("font", "10px sans-serif");

		});

		d3.csv('passengers.csv', function(data) {

			var color = function(d) { return colorgen(d.passengerType); };

			var parcoords = d3.parcoords()("#passengers")
			    .data(data.map(function(dat) {
			    	if (dat['delta.checkIn'] > 0.2) {
			    		dat['delta.checkIn'] = null;
			    	} else {
			    		dat['delta.checkIn'] = dat['delta.checkIn'] * 24 * 60
			    	}
			    	if (dat['delta.security'] > 0.2) {
			    		dat['delta.security'] = null;
			    	} else {
			    		dat['delta.security'] = dat['delta.security'] * 24 * 60
			    	}
			    	dat['delta.arrival'] = dat['delta.arrival'] * 24 * 60
			    	return dat;
			    }))
			    .hideAxis(["flightID", "gender", "security", "concourse", "gate", "boarding", "departure"])
			    .color(color)
			    .alpha(0.05)
			    .composite("darken")
			    .margin({ top: 24, left: 150, bottom: 12, right: 0 })
			    .mode("queue")
			    .render()
			    //.reorderable();
			    .brushMode("1D-axes");  // enable brushing


		  	parcoords.svg.selectAll("text")
		    	.style("font", "10px sans-serif");

		});

	</script>

</body>
</html>