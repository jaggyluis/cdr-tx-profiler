<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="aircraft.js"></script>
	<script src="aircraft_bis.js"></script>
	<script type="text/javascript">

		var outlist = [];
		var ter = [];
		
		function template_base() {
    		this.manufacturer = null;
    		this.name = null;
    		this.ICAO = null; 			// International Civil Aviation Organization - aircraft type designator (air traffic control / flight planning)
    		this.IATA = null;			// International Air Transport Association - aircraft type designator (general public)
    		this.wingspan = null;		
    		this.height = null;
			this.ARC = null;			// *-* - Aircraft Aproach Category (letter) / Airplane Design Group (numeral)
			this.RFLW = null;			// IACA Aerodrome Reference Code - Aeroplane reference Field length (number) / Windgspan (letter)
			this.wake = null;			// turbulence category
			this.seats = null;			// default seating by manufacturer
		}


		console.log(aircraft.length, aircraft_bis.length);
		
		aircraft_bis.forEach(function(plane) {

			var filteredArray = aircraft.filter(function (p) {
				return p.ICAO === plane.ICAO;
			});
			if (filteredArray.length !== 0) {

				var p1 = plane;
				var p2 = filteredArray[0];
				var template = new template_base();

				template.manufacturer = p1.manufacturer || null;
				template.name = p1.name || null;
				template.ICAO = p1.ICAO || null;
				template.IATA = p2.IATA || null;
				template.wingspan = p1.wingspan || null;
				template.height = p1.height || null;
				template.ARC = p1.ARC || null;
				template.RFLW = p2.code || null;
				template.wake = p2.wake || null;
				template.seats = p2.seats || null;

				outlist.push(template);
			} else {
				
				var template = new template_base();

				template.manufacturer = plane.manufacturer || null;
				template.name = plane.manufacturer || null;
				template.ICAO = plane.ICAO || null;
				template.wingspan = plane.wingspan || null;
				template.height = plane.height || null;
				template.ARC = plane.ARC || null;

				outlist.push(template);
			}
		})
		aircraft.forEach(function(plane) {

			var filteredArray = outlist.filter(function (p) {
				return p.ICAO === plane.ICAO;
			});

			if (filteredArray.length === 0) {
				
				var template = new template_base();

				template.manufacturer = plane.name.split(' ')[0] || null;
				template.name = plane.name.split(' ')[1] || null;
				template.ICAO = plane.ICAO || null;
				template.IATA = plane.IATA || null;
				template.RFLW = plane.RFLW || null;
				template.wake = plane.wake || null;
				template.seats = plane.seats || null;

				Object.keys(template).forEach(function(key) {
					if (template[key] === 'n/a'){
						template[key] = null;
					}
				})

				outlist.push(template);
			} 
		})
		console.log(JSON.stringify(outlist));
	</script>
</head>
<body>
</body>
</html>